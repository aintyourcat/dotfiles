#!/bin/sh

OUTPUT="$(mktemp)";
INPUT=$( \
    rofi -dmenu \
    -theme-str 'listview { enabled: false; }' \
    -theme-str 'entry {placeholder: "Input text...";}' \
    -theme-str 'icon-inputbar {filename: "qrscanner-symbolic";}'
)

if [ -n "$INPUT" ]; then
    qrencode --output "$OUTPUT" "$INPUT";
    notify-send --expire-time 0 --icon "$OUTPUT" "$INPUT"; 
    rm -f "$OUTPUT";
fi
