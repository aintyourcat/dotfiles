#!/usr/bin/env bash

# Options to show
label=('Quit' 'Reboot' 'Shutdown')
icon=('󰍃' '󰑐' '󰐥');

for ((i=0; i<${#label[*]}; i++)); do
    options="${options}|${icon[i]} ${label[i]}"
done

options=${options#|}

# Choose an option
chosen_option=$(printf "$options" | rofi -dmenu -p "Power" -sep "|" -lines 3 -no-show-icons -width 20)

# Confirm chosen option
if [ -n "$chosen_option" ]; then
    chosen_option=${chosen_option#? }
    answer=$(printf "󰅖 No|󰄬 Yes" | rofi -dmenu -p "$chosen_option?" -sep "|" -lines 2 -no-show-icons -width 20)
    answer=${answer#? }

    case $answer in
        Yes)
            case "$chosen_option" in
                Quit) 
                    pkill -fo "$(command -v panel)" > /dev/null 2>&1
                    sleep 1s
                    bspc quit
                ;;
                Shutdown) sudo poweroff ;;
                Reboot) sudo reboot ;;
            esac 
        ;;
    esac
fi
