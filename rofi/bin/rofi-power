#!/bin/bash

# Function to confirm selected mode
confirm() {
    answer=$(echo "󰅖 No|󰄬 Yes" | rofi -dmenu -p "$1?" -sep "|" -lines 2 -no-show-icons -width 20)
    answer=${answer#? }
    case $answer in
        Yes)
            case $1 in
                Quit) 
                    pkill -fo "$(which panel)" > /dev/null; bspc quit 
		        ;;
                Shutdown) 
                    sudo poweroff 
                ;;
                Reboot) 
                    sudo reboot 
                ;;
            esac 
        ;;
    esac
    exit
}

# Mode and it's relevant icon
mode=('Quit' 'Reboot' 'Shutdown')
icon=('󰍃' '󰑐' '󰐥');

for ((i=0; i<${#mode[*]}; i++)); do
    option="${option}|${icon[i]} ${mode[i]}"
    option=${option#|}
done

# Choose a mode
chosen=$(echo $option | rofi -dmenu -p "Power" -sep "|" -lines 3 -no-show-icons -width 20)
[ -n "$chosen" ] && chosen=${chosen#? } && confirm $chosen
