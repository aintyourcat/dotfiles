#!/bin/sh

# Choose an option
chosen_option=$( \
    printf "%b\n" \
        'Quit\0icon\037system-log-out-symbolic' \
        'Reboot\0icon\037system-reboot-symbolic' \
        'Shutdown\0icon\037system-shutdown-symbolic' | \
    rofi -dmenu \
        -theme-str 'inputbar {enabled: false;}' \
        -theme-str 'listview {border: 0; lines: 3;}' \
)

# Confirm chosen option
if [ -n "$chosen_option" ]; then
    answer=$( \
        printf "%b\n" \
            'Yes\0icon\037object-select-symbolic' \
            'No\0icon\037window-close-symbolic' | \
        rofi -dmenu \
            -theme-str 'inputbar {enabled: false;}' \
            -theme-str 'listview {border: 0; lines: 2;}' \
    )

    if [ $answer = "Yes" ]; then
        case "$chosen_option" in
            Shutdown)
                sudo poweroff
            ;;
            Reboot)
                sudo reboot
            ;;
            Quit)
                pkill -fo "$(command -v panel)" > /dev/null 2>&1
                sleep 1s
                bspc quit
            ;;
        esac
    fi
fi
