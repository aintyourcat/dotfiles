#!/bin/sh

# Load xresources
[ -f "$XRESOURCES" ] && xrdb -merge "$XRESOURCES"

# Autostart programs
light -S 20 &
xsetroot -cursor_name left_ptr &
xss-lock -- xsecurelock &
pipewire > /tmp/pipewire.log 2>&1 &
pipewire-pulse > /tmp/pipewire-pulse.log 2>&1 &
pkill ssh-agent; eval "$(ssh-agent)"

# Sessions
export SESSION="${1:-bspwm}"

case $SESSION in
    bspwm) exec dbus-run-session bspwm ;;
    hlwm) exec dbus-run-session herbstluftwm ;;
    *) exec $1 ;;
esac
