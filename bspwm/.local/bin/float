#!/bin/sh

test -n "$1" || exit
test -n "$2" || exit
window_id=$(bspc query --nodes --desktop focused --node focused.window.floating) || exit
root_id=$(lsw -r)

wattr whb "$window_id" "$root_id" | {
    read -r window_w window_h window_border
    read -r screen_w screen_h _

    case $1 in
        top) y=0 ;;
        middle) y=$(( (screen_h - window_h - (window_border * 2)) / 2 ));;
        bottom) y=$(( screen_h - window_h - (window_border * 2) ));;
        *) exit 1 ;;
    esac

    case $2 in
        left) x=0 ;;
        center) x=$(( (screen_w - window_w - (window_border * 2)) / 2 )) ;;
        right) x=$(( screen_w - window_w - (window_border * 2) )) ;;
        *) exit 1 ;;
    esac

    wtp "$x" "$y" "$window_w" "$window_h" "$window_id"
}
